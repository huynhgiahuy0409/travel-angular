{"ast":null,"code":"import { debounceTime, switchMap } from 'rxjs/operators';\nimport { FormControl } from '@angular/forms';\nimport { forkJoin, of } from 'rxjs';\nimport { ADMIN_ROLE, CENSOR_ROLE } from 'src/app/shared/models/constant';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/user/services/user.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"ngx-infinite-scroll\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../user-profile/user-profile.component\";\n\nfunction MembersComponent_div_0_div_15_div_9_app_user_profile_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-user-profile\", 12);\n  }\n\n  if (rf & 2) {\n    const admin_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"user\", admin_r6);\n  }\n}\n\nfunction MembersComponent_div_0_div_15_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, MembersComponent_div_0_div_15_div_9_app_user_profile_1_Template, 1, 1, \"app-user-profile\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const admin_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", admin_r6.role.name === \"ROLE_ADMIN\" && admin_r6.active === 1);\n  }\n}\n\nfunction MembersComponent_div_0_div_15_div_18_app_user_profile_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-user-profile\", 12);\n  }\n\n  if (rf & 2) {\n    const censor_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"user\", censor_r9);\n  }\n}\n\nfunction MembersComponent_div_0_div_15_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, MembersComponent_div_0_div_15_div_18_app_user_profile_1_Template, 1, 1, \"app-user-profile\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const censor_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", censor_r9.role.name === \"ROLE_CENSOR\" && censor_r9.active === 1);\n  }\n}\n\nconst _c0 = function () {\n  return [\"/administrator/home/user-management/admins\"];\n};\n\nconst _c1 = function () {\n  return [\"/administrator/home/user-management/censors\"];\n};\n\nfunction MembersComponent_div_0_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 4);\n    i0.ɵɵelement(2, \"app-user-profile\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4)(4, \"div\", 5);\n    i0.ɵɵtext(5, \" Qu\\u1EA3n tr\\u1ECB vi\\u00EAn \");\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 13);\n    i0.ɵɵtemplate(9, MembersComponent_div_0_div_15_div_9_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"button\", 15);\n    i0.ɵɵtext(11, \" Xem t\\u1EA5t c\\u1EA3 \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5);\n    i0.ɵɵtext(14, \" Ng\\u01B0\\u1EDDi ki\\u1EC3m duy\\u1EC7t \");\n    i0.ɵɵelementStart(15, \"span\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 13);\n    i0.ɵɵtemplate(18, MembersComponent_div_0_div_15_div_18_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 15);\n    i0.ɵɵtext(20, \" Xem t\\u1EA5t c\\u1EA3 \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const users_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"user\", ctx_r2.currUser);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \\u00B7 \", users_r1[1], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", users_r1[0]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(7, _c0));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \\u00B7 \", users_r1[3], \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", users_r1[2]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(8, _c1));\n  }\n}\n\nfunction MembersComponent_div_0_div_16_div_5_app_user_profile_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-user-profile\", 12);\n  }\n\n  if (rf & 2) {\n    const searchUser_r14 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"user\", searchUser_r14);\n  }\n}\n\nfunction MembersComponent_div_0_div_16_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, MembersComponent_div_0_div_16_div_5_app_user_profile_1_Template, 1, 1, \"app-user-profile\", 17);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const searchUser_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", searchUser_r14.active === 1);\n  }\n}\n\nfunction MembersComponent_div_0_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"div\", 4)(2, \"div\", 5);\n    i0.ɵɵtext(3, \" K\\u1EBFt qu\\u1EA3 t\\u00ECm ki\\u1EBFm \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 13);\n    i0.ɵɵtemplate(5, MembersComponent_div_0_div_16_div_5_Template, 2, 1, \"div\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.searchUsers);\n  }\n}\n\nfunction MembersComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵlistener(\"scrolled\", function MembersComponent_div_0_Template_div_scrolled_0_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onScrollDown($event));\n    });\n    i0.ɵɵelementStart(1, \"div\", 2)(2, \"div\", 3)(3, \"div\", 4)(4, \"div\", 5);\n    i0.ɵɵtext(5, \" Th\\u00E0nh vi\\u00EAn \");\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 6);\n    i0.ɵɵtext(9, \" Ng\\u01B0\\u1EDDi tham gia nh\\u00F3m n\\u00E0y s\\u1EBD hi\\u1EC3n th\\u1ECB t\\u1EA1i \\u0111\\u00E2y \");\n    i0.ɵɵelementStart(10, \"a\");\n    i0.ɵɵtext(11, \" T\\u00ECm hi\\u1EC3u th\\u00EAm\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\", 7);\n    i0.ɵɵelement(13, \"img\", 8)(14, \"input\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(15, MembersComponent_div_0_div_15_Template, 21, 9, \"div\", 10);\n    i0.ɵɵtemplate(16, MembersComponent_div_0_div_16_Template, 6, 1, \"div\", 10);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const users_r1 = ctx.ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"scrollWindow\", false)(\"infiniteScrollThrottle\", 1);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \\u00B7 \", users_r1[4], \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.searchCtrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.searchUsers.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.searchUsers.length > 0);\n  }\n}\n\nexport class MembersComponent {\n  constructor(userService, matDialog) {\n    this.userService = userService;\n    this.matDialog = matDialog;\n    this.searchUsers = [];\n    this.searchCtrl = new FormControl('');\n    this.initSearchUser = {\n      pageable: {\n        pageIndex: 0,\n        pageSize: 10\n      },\n      active: 1\n    };\n  }\n\n  ngOnInit() {\n    this.searchCtrl.valueChanges.pipe(debounceTime(1000), switchMap(term => {\n      this.searchUsers = [];\n      this.initSearchUser.pageable.pageIndex = 0;\n      this.initSearchUser.fullName = term;\n\n      if (term) {\n        console.log(this.initSearchUser);\n        return this.userService.findAll(this.initSearchUser);\n      } else {\n        return of([]);\n      }\n    })).subscribe(response => {\n      console.log(response);\n\n      if (response.length === 0) {\n        this.searchUsers = [];\n      } else {\n        this.searchUsers = this.searchUsers.concat(response);\n      }\n    });\n    this.currUser = this.userService.userBSub.value;\n    let initFilter = {\n      pageable: {\n        pageIndex: 0,\n        pageSize: 3,\n        sortable: {\n          dir: 'ASC',\n          order: 'createDate'\n        }\n      },\n      active: 1\n    };\n    let admins$ = this.userService.findAll(Object.assign(Object.assign({}, initFilter), {\n      role: ADMIN_ROLE\n    }));\n    let totalAdminUser$ = this.userService.countByRoleNameAndActive(ADMIN_ROLE, 1);\n    let censors$ = this.userService.findAll(Object.assign(Object.assign({}, initFilter), {\n      role: CENSOR_ROLE\n    }));\n    let totalCensorUser$ = this.userService.countByRoleNameAndActive(CENSOR_ROLE, 1);\n    let totalUsers$ = this.userService.getTotalUser();\n    this.users$ = forkJoin([admins$, totalAdminUser$, censors$, totalCensorUser$, totalUsers$]);\n    this.users$.subscribe(v => console.log(v));\n  }\n\n  onScrollDown($event) {\n    this.initSearchUser.pageable.pageIndex++;\n\n    if (this.searchCtrl.value) {\n      this.userService.findAll(this.initSearchUser).subscribe(response => {\n        this.searchUsers = this.searchUsers.concat(response);\n      });\n    }\n  }\n\n}\n\nMembersComponent.ɵfac = function MembersComponent_Factory(t) {\n  return new (t || MembersComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.MatDialog));\n};\n\nMembersComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MembersComponent,\n  selectors: [[\"app-members\"]],\n  decls: 2,\n  vars: 3,\n  consts: [[\"class\", \"container\", \"infinite-scroll\", \"\", 3, \"scrollWindow\", \"infiniteScrollThrottle\", \"scrolled\", 4, \"ngIf\"], [\"infinite-scroll\", \"\", 1, \"container\", 3, \"scrollWindow\", \"infiniteScrollThrottle\", \"scrolled\"], [1, \"grid\", \"wide\", 2, \"padding\", \"10px\"], [1, \"user-group__list\", \"box-shadow\"], [1, \"user-group__item\"], [1, \"title\"], [1, \"sub-title\"], [1, \"search-box\"], [\"src\", \"assets/image/search.png\", \"alt\", \"\"], [\"type\", \"text\", \"placeholder\", \"T\\u00ECm ki\\u1EBFm th\\u00E0nh vi\\u00EAn\", 3, \"formControl\"], [\"class\", \"user-group__list\", 4, \"ngIf\"], [1, \"user-group__list\"], [3, \"user\"], [1, \"user-profile__list\"], [\"class\", \"user-profile__item\", 4, \"ngFor\", \"ngForOf\"], [\"mat-button\", \"\", 1, \"w-fit\", 3, \"routerLink\"], [1, \"user-profile__item\"], [3, \"user\", 4, \"ngIf\"]],\n  template: function MembersComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, MembersComponent_div_0_Template, 17, 6, \"div\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.users$));\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLink, i5.MatButton, i6.InfiniteScrollDirective, i7.DefaultValueAccessor, i7.NgControlStatus, i7.FormControlDirective, i8.UserProfileComponent, i3.AsyncPipe],\n  styles: [\".show[_ngcontent-%COMP%] {\\n  display: block;\\n}\\n\\n\\n\\n.search-box[_ngcontent-%COMP%] {\\n  background-color: var(--background-color-1--);\\n  width: 100%;\\n  border-radius: 20px;\\n  display: flex;\\n  align-items: center;\\n  padding: 0 15px;\\n}\\n\\n.search-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  width: 18px;\\n}\\n\\n.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%] {\\n  width: 100%;\\n  background-color: transparent;\\n  outline: none;\\n  border: 0;\\n  padding: 10px;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  overflow: auto;\\n}\\n\\n\\n\\n.user-group__list[_ngcontent-%COMP%] {\\n  margin: auto;\\n  background: #fff;\\n  padding: 10px;\\n  border-radius: 5px;\\n}\\n\\n.user-group__item[_ngcontent-%COMP%] {\\n  padding: 10px 0;\\n  border-bottom: 0.5px solid #ccc;\\n}\\n\\n.user-group__item[_ngcontent-%COMP%]:last-child {\\n  border-bottom: unset;\\n}\\n\\n.user-group__item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] {\\n  font-weight: 550;\\n}\\n\\n.user-group__item[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  color: var(--primary-color--);\\n  font-weight: 550;\\n}\\n\\n.user-group__item[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\n  text-decoration: underline;\\n}\\n\\n\\n\\n.user-profile__list[_ngcontent-%COMP%]   .user-profile__item[_ngcontent-%COMP%] {\\n  margin: 10px 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWJlcnMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0FBQ0o7O0FBQ0EsZUFBQTs7QUFDQTtFQUNJLDZDQUFBO0VBQ0EsV0FBQTtFQUNBLG1CQUFBO0VBQ0EsYUFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtBQUVKOztBQUNBO0VBQ0ksV0FBQTtBQUVKOztBQUNBO0VBQ0ksV0FBQTtFQUNBLDZCQUFBO0VBQ0EsYUFBQTtFQUNBLFNBQUE7RUFDQSxhQUFBO0FBRUo7O0FBQUE7RUFDSSxhQUFBO0VBQ0EsY0FBQTtBQUdKOztBQURBLGVBQUE7O0FBQ0E7RUFDSSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFJSjs7QUFEQTtFQUNJLGVBQUE7RUFDQSwrQkFBQTtBQUlKOztBQURBO0VBQ0ksb0JBQUE7QUFJSjs7QUFEQTtFQUNJLGdCQUFBO0FBSUo7O0FBQ0E7RUFDSSw2QkFBQTtFQUNBLGdCQUFBO0FBRUo7O0FBQ0E7RUFDSSwwQkFBQTtBQUVKOztBQUNBLEtBQUE7O0FBR0E7RUFDSSxjQUFBO0FBQUoiLCJmaWxlIjoibWVtYmVycy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5zaG93e1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbn1cclxuLyogc2VhcmNoIGJveCAqL1xyXG4uc2VhcmNoLWJveCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLWNvbG9yLTEtLSk7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHBhZGRpbmc6IDAgMTVweDtcclxufVxyXG5cclxuLnNlYXJjaC1ib3ggaW1nIHtcclxuICAgIHdpZHRoOiAxOHB4O1xyXG59XHJcblxyXG4uc2VhcmNoLWJveCBpbnB1dCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGJvcmRlcjogMDtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbn1cclxuLmNvbnRhaW5lcntcclxuICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICBvdmVyZmxvdzogYXV0bztcclxufVxyXG4vKiB1c2VyIGdyb3VwICovXHJcbi51c2VyLWdyb3VwX19saXN0IHtcclxuICAgIG1hcmdpbjogYXV0bztcclxuICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG59XHJcblxyXG4udXNlci1ncm91cF9faXRlbSB7XHJcbiAgICBwYWRkaW5nOiAxMHB4IDA7XHJcbiAgICBib3JkZXItYm90dG9tOiAwLjVweCBzb2xpZCAjY2NjO1xyXG59XHJcblxyXG4udXNlci1ncm91cF9faXRlbTpsYXN0LWNoaWxkIHtcclxuICAgIGJvcmRlci1ib3R0b206IHVuc2V0O1xyXG59XHJcblxyXG4udXNlci1ncm91cF9faXRlbSAudGl0bGUge1xyXG4gICAgZm9udC13ZWlnaHQ6IDU1MDtcclxufVxyXG5cclxuLnVzZXItZ3JvdXBfX2l0ZW0gLnN1Yi10aXRsZSB7fVxyXG5cclxuLnVzZXItZ3JvdXBfX2l0ZW0gLnN1Yi10aXRsZSBhIHtcclxuICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yLS0pO1xyXG4gICAgZm9udC13ZWlnaHQ6IDU1MDtcclxufVxyXG5cclxuLnVzZXItZ3JvdXBfX2l0ZW0gLnN1Yi10aXRsZSBhOmhvdmVyIHtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1xyXG59XHJcblxyXG4vKiAgKi9cclxuLnVzZXItcHJvZmlsZV9fbGlzdCB7fVxyXG5cclxuLnVzZXItcHJvZmlsZV9fbGlzdCAudXNlci1wcm9maWxlX19pdGVtIHtcclxuICAgIG1hcmdpbjogMTBweCAwXHJcbn0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["debounceTime","switchMap","FormControl","forkJoin","of","ADMIN_ROLE","CENSOR_ROLE","i0","MembersComponent","constructor","userService","matDialog","pageable","pageIndex","pageSize","active","ngOnInit","searchCtrl","valueChanges","pipe","term","searchUsers","initSearchUser","fullName","console","log","findAll","subscribe","response","length","concat","currUser","userBSub","value","initFilter","sortable","dir","order","admins$","Object","role","totalAdminUser$","countByRoleNameAndActive","censors$","totalCensorUser$","totalUsers$","getTotalUser","users$","v","onScrollDown","$event","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["E:\\Angular\\Travel-DATN\\travel-angular\\src\\app\\admin\\components\\home\\components\\user-management\\components\\members\\members.component.ts","E:\\Angular\\Travel-DATN\\travel-angular\\src\\app\\admin\\components\\home\\components\\user-management\\components\\members\\members.component.html"],"sourcesContent":["import { debounceTime, tap, switchMap } from 'rxjs/operators';\nimport { Component, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Observable, forkJoin, of } from 'rxjs';\nimport { ADMIN_ROLE, CENSOR_ROLE } from 'src/app/shared/models/constant';\nimport { FilterUser } from 'src/app/shared/models/model';\nimport { UserProfileResponse } from 'src/app/shared/models/response';\nimport { UserService } from 'src/app/user/services/user.service';\n\n@Component({\n  selector: 'app-members',\n  templateUrl: './members.component.html',\n  styleUrls: ['./members.component.scss']\n})\nexport class MembersComponent implements OnInit {\n  currUser!: UserProfileResponse | null\n  users$!: Observable<[UserProfileResponse[], number, UserProfileResponse[], number, number]>\n  searchUsers: UserProfileResponse[] = []\n  searchCtrl: FormControl = new FormControl('')\n  initSearchUser: FilterUser = {\n    pageable: {\n      pageIndex: 0,\n      pageSize: 10,\n    },\n    active: 1,\n  };\n  constructor(private userService: UserService, private matDialog: MatDialog) { }\n  ngOnInit(): void {\n    this.searchCtrl.valueChanges.pipe(debounceTime(1000), switchMap(term => {\n      this.searchUsers = []\n      this.initSearchUser.pageable.pageIndex = 0\n      this.initSearchUser.fullName = term\n      if(term){\n        console.log(this.initSearchUser);\n        \n        return this.userService.findAll(this.initSearchUser)\n      }else{\n        return of([])\n      }\n    })).subscribe(\n      response => {\n        console.log(response)\n        if(response.length === 0 ){\n          this.searchUsers = []\n        }else{\n          this.searchUsers = this.searchUsers.concat(response)\n        }\n      }\n    )\n    this.currUser = this.userService.userBSub.value\n    let initFilter: FilterUser = {\n      pageable: {\n        pageIndex: 0,\n        pageSize: 3,\n        sortable: {\n          dir: 'ASC',\n          order: 'createDate'\n        }\n      },\n      active: 1\n    }\n    let admins$: Observable<UserProfileResponse[]> = this.userService.findAll({...initFilter, role: ADMIN_ROLE})\n    let totalAdminUser$: Observable<number> = this.userService.countByRoleNameAndActive(ADMIN_ROLE, 1)\n    let censors$: Observable<UserProfileResponse[]> = this.userService.findAll({...initFilter, role: CENSOR_ROLE})\n    let totalCensorUser$: Observable<number> = this.userService.countByRoleNameAndActive(CENSOR_ROLE, 1)\n    let totalUsers$ = this.userService.getTotalUser()\n    this.users$ = forkJoin([admins$, totalAdminUser$, censors$, totalCensorUser$,totalUsers$])\n    this.users$.subscribe(v => console.log(v))\n  }\n  onScrollDown($event: any){\n    this.initSearchUser.pageable.pageIndex++\n    if(this.searchCtrl.value){\n      this.userService.findAll(this.initSearchUser).subscribe(response => {\n        this.searchUsers = this.searchUsers.concat(response)\n      })\n    }\n  }\n}\n","<div class=\"container\" infinite-scroll [scrollWindow]=\"false\" (scrolled)=\"onScrollDown($event)\"\n[infiniteScrollThrottle]=\"1\" *ngIf=\"(users$ | async) as users\">\n    <div class=\"grid wide\" style=\"padding: 10px\">\n        <div class=\"user-group__list box-shadow\">\n            <div class=\"user-group__item\">\n                <div class=\"title\">\n                    Thành viên\n                    <span> · {{ users[4] }}</span>\n                </div>\n                <div class=\"sub-title\">\n                    Người tham gia nhóm này sẽ hiển thị tại đây\n                    <a> Tìm hiểu thêm</a>\n                </div>\n                <div class=\"search-box\">\n                    <img src=\"assets/image/search.png\" alt=\"\" />\n                    <input type=\"text\" placeholder=\"Tìm kiếm thành viên\" [formControl]=\"searchCtrl\"/>\n                </div>\n            </div>\n            <div class=\"user-group__list\" *ngIf=\"searchUsers.length === 0\">\n                <div class=\"user-group__item\">\n                    <app-user-profile [user]=currUser></app-user-profile>\n                </div>\n                <div class=\"user-group__item\">\n                    <div class=\"title\">\n                        Quản trị viên\n                        <span>  · {{users[1]}}</span>\n                    </div>\n                    <div class=\"user-profile__list\">\n                        <div class=\"user-profile__item\" *ngFor=\"let admin of users[0]\">\n                            <app-user-profile [user]=admin *ngIf=\"admin.role.name === 'ROLE_ADMIN' && admin.active === 1\"></app-user-profile>\n                        </div>\n                    </div>\n                    <button mat-button class=\"w-fit\" [routerLink]=\"['/administrator/home/user-management/admins']\">\n                        Xem tất cả\n                    </button>\n                </div>\n                <div class=\"user-group__item\">\n                    <div class=\"title\">\n                        Người kiểm duyệt\n                        <span>  · {{users[3]}}</span>\n                    </div>\n                    <div class=\"user-profile__list\">\n                        <div class=\"user-profile__item\" *ngFor=\"let censor of users[2]\">\n                            <app-user-profile [user]=censor *ngIf=\"censor.role.name === 'ROLE_CENSOR' && censor.active === 1\"></app-user-profile>\n                        </div>\n                    </div>\n                    <button mat-button class=\"w-fit\"  [routerLink]=\"['/administrator/home/user-management/censors']\">\n                        Xem tất cả\n                    </button>\n                </div>\n            </div>\n            <div class=\"user-group__list\" *ngIf=\"searchUsers.length > 0\">\n                <div class=\"user-group__item\">\n                    <div class=\"title\">\n                        Kết quả tìm kiếm\n                    </div>\n                    <div class=\"user-profile__list\">\n                        <div class=\"user-profile__item\" *ngFor=\"let searchUser of searchUsers\">\n                            <app-user-profile [user]=searchUser *ngIf=\"searchUser.active === 1\"></app-user-profile>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"]},"metadata":{},"sourceType":"module"}